{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/workspace/Goal_Keeper_App/src/components/auth/Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./Login.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Register = props => {\n  _s();\n\n  const [users, setUsers] = useState({});\n  const conflictDialog = useRef();\n  const history = useHistory();\n\n  const existingUserCheck = () => {\n    return fetch(`http://localhost:8088/users`).then(res => res.json()).then(user => !!user.length);\n  };\n\n  const handleRegister = e => {\n    e.preventDefault();\n    existingUserCheck().then(userExists => {\n      if (!userExists) {\n        fetch(\"http://localhost:8088/users\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(users)\n        }).then(res => res.json()).then(createdUser => {\n          if (createdUser.hasOwnProperty(\"id\")) {\n            localStorage.setItem(\"goal_keeper\", createdUser.id);\n            history.push(\"/\");\n          }\n        });\n      } else {\n        conflictDialog.current.showModal();\n      }\n    });\n  };\n\n  const updateUsers = evt => {\n    const copy = { ...users\n    };\n    copy[evt.target.id] = evt.target.value;\n    setUsers(copy);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    style: {\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"dialog\", {\n      className: \"dialog dialog--password\",\n      ref: conflictDialog,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Account with that email address already exists\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button--close\",\n        onClick: e => conflictDialog.current.close(),\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form--login\",\n      onSubmit: handleRegister,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        children: \"Please Register for Honey Rae Repairs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: \" Full Name \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: updateUsers,\n          type: \"text\",\n          id: \"name\",\n          className: \"form-control\",\n          placeholder: \"Enter your name\",\n          required: true,\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"address\",\n          children: \" Address \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: updateUsers,\n          type: \"text\",\n          id: \"address\",\n          className: \"form-control\",\n          placeholder: \"Street address\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \" Email address \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: updateUsers,\n          type: \"email\",\n          id: \"email\",\n          className: \"form-control\",\n          placeholder: \"Email address\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \" Register \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Register, \"uHQOH+iZcrKj36CE5UEBQ+EuR48=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useRef","useState","useHistory","Register","props","users","setUsers","conflictDialog","history","existingUserCheck","fetch","then","res","json","user","length","handleRegister","e","preventDefault","userExists","method","headers","body","JSON","stringify","createdUser","hasOwnProperty","localStorage","setItem","id","push","current","showModal","updateUsers","evt","copy","target","value","textAlign","close"],"sources":["/Users/macbook/workspace/Goal_Keeper_App/src/components/auth/Register.js"],"sourcesContent":["import React, { useRef, useState } from \"react\"\nimport { useHistory } from \"react-router-dom\"\nimport \"./Login.css\"\n\n\n\nexport const Register = (props) => {\n    const [users, setUsers] = useState({})\n    const conflictDialog = useRef()\n    const history = useHistory()\n\n    \n\n    const existingUserCheck = () => {\n        return fetch(`http://localhost:8088/users`)\n            .then(res => res.json())\n            .then(user => !!user.length)\n    }\n    const handleRegister = (e) => {\n        e.preventDefault()\n        existingUserCheck()\n            .then((userExists) => {\n                if (!userExists) {\n                    fetch(\"http://localhost:8088/users\", {\n                        method: \"POST\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        },\n                        body: JSON.stringify(users)\n                    })\n                        .then(res => res.json())\n                        .then(createdUser => {\n                            if (createdUser.hasOwnProperty(\"id\")) {\n                                localStorage.setItem(\"goal_keeper\", createdUser.id)\n                                history.push(\"/\")\n                            }\n                        })\n                }\n                else {\n                    conflictDialog.current.showModal()\n                }\n            })\n    }\n\n    const updateUsers = (evt) => {\n        const copy = {...users}\n        copy[evt.target.id] = evt.target.value\n        setUsers(copy)\n    }\n\n\n    return (\n        <main style={{ textAlign: \"center\" }}>\n            <dialog className=\"dialog dialog--password\" ref={conflictDialog}>\n                <div>Account with that email address already exists</div>\n                <button className=\"button--close\" onClick={e => conflictDialog.current.close()}>Close</button>\n            </dialog>\n\n            <form className=\"form--login\" onSubmit={handleRegister}>\n                <h1 className=\"h3 mb-3 font-weight-normal\">Please Register for Honey Rae Repairs</h1>\n                <fieldset>\n                    <label htmlFor=\"name\"> Full Name </label>\n                    <input onChange={updateUsers}\n                           type=\"text\" id=\"name\" className=\"form-control\"\n                           placeholder=\"Enter your name\" required autoFocus />\n                </fieldset>\n                <fieldset>\n                    <label htmlFor=\"address\"> Address </label>\n                    <input onChange={updateUsers} type=\"text\" id=\"address\" className=\"form-control\" placeholder=\"Street address\" required />\n                </fieldset>\n                <fieldset>\n                    <label htmlFor=\"email\"> Email address </label>\n                    <input onChange={updateUsers} type=\"email\" id=\"email\" className=\"form-control\" placeholder=\"Email address\" required />\n                </fieldset>\n                <fieldset>\n                    <button type=\"submit\"> Register </button>\n                </fieldset>\n            </form>\n        </main>\n    )\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}